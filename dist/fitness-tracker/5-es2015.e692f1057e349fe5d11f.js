(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,i){"use strict";i.r(e),i.d(e,"TrainingModule",(function(){return Z}));var n=i("tyNb"),c=i("fXoL"),r=i("vEl1"),a=i("ofXK"),s=i("wZkO"),o=i("a318"),b=i("kt0X"),u=i("XiUz"),l=i("3Pt+"),m=i("Wp6s"),g=i("Xa2L"),f=i("kmnG"),d=i("d3UM"),h=i("FKr1"),p=i("bTqV");function S(t,e){1&t&&c.Ob(0,"mat-spinner")}function x(t,e){if(1&t&&(c.Tb(0,"mat-option",9),c.yc(1),c.Sb()),2&t){const t=e.$implicit;c.kc("value",t.name),c.Bb(1),c.Ac(" ",t.name," ")}}function y(t,e){if(1&t&&(c.Tb(0,"mat-form-field"),c.Tb(1,"mat-label"),c.yc(2,"Select type of training"),c.Sb(),c.Tb(3,"mat-select",7),c.xc(4,x,2,2,"mat-option",8),c.Sb(),c.Sb()),2&t){const t=c.fc();c.Bb(4),c.kc("ngForOf",t.trainingExercises)}}function v(t,e){1&t&&(c.Tb(0,"button",10),c.yc(1," Start "),c.Sb())}function T(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",11),c.bc("click",(function(){return c.rc(t),c.fc().fetchExercises()})),c.yc(1," Reload Resources "),c.Sb()}}let w=(()=>{class t{constructor(t,e){this.trainingService=t,this.store=e}ngOnInit(){this.isLoading$=this.store.select(o.a),this.trainingSub=this.trainingService.exercisesChanged.subscribe(t=>{this.trainingExercises=t}),this.fetchExercises()}ngOnDestroy(){this.trainingSub&&this.trainingSub.unsubscribe()}onStartTraining(t){if(!t.value.exercise)return void window.alert("Please choose a workout!");const e=this.trainingExercises.find(e=>e.name===t.value.exercise);this.trainingService.startExercise(e)}fetchExercises(){this.trainingService.fetchAvailableExercises()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(r.a),c.Nb(b.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-new-training"]],decls:14,vars:8,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["form","ngForm"],["fxLayout","column","fxFlex","","fxFlex.gt-xs","600px","fxLayoutAlign","center center"],[4,"ngIf"],["type","submit","mat-button","",4,"ngIf"],["mat-raised-button","","type","button",3,"click",4,"ngIf"],["ngModel","","name","exercise"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-button",""],["mat-raised-button","","type","button",3,"click"]],template:function(t,e){if(1&t){const t=c.Ub();c.Tb(0,"section",0),c.Tb(1,"form",1,2),c.bc("ngSubmit",(function(){c.rc(t);const i=c.pc(2);return e.onStartTraining(i)})),c.Tb(3,"mat-card",3),c.Tb(4,"mat-card-title"),c.yc(5,"Choose a workout!"),c.Sb(),c.Tb(6,"mat-card-content"),c.xc(7,S,1,0,"mat-spinner",4),c.gc(8,"async"),c.xc(9,y,5,1,"mat-form-field",4),c.gc(10,"async"),c.Sb(),c.Tb(11,"mat-card-actions"),c.xc(12,v,2,0,"button",5),c.xc(13,T,2,0,"button",6),c.Sb(),c.Sb(),c.Sb(),c.Sb()}2&t&&(c.Bb(7),c.kc("ngIf",c.hc(8,4,e.isLoading$)),c.Bb(2),c.kc("ngIf",!c.hc(10,6,e.isLoading$)&&e.trainingExercises),c.Bb(3),c.kc("ngIf",e.trainingExercises),c.Bb(1),c.kc("ngIf",!e.trainingExercises))},directives:[u.c,u.b,l.t,l.n,l.o,m.a,u.a,m.e,m.c,a.m,m.b,g.c,f.c,f.g,d.a,l.m,l.p,a.l,h.n,p.a],pipes:[a.b],styles:["mat-card-title[_ngcontent-%COMP%]{margin-bottom:30px}.new-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();var k=i("+0xr"),C=i("Dh3D"),I=i("M9IT"),E=i("qFsG");function B(t,e){1&t&&(c.Tb(0,"mat-header-cell",14),c.yc(1,"Date"),c.Sb())}function M(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.yc(1),c.gc(2,"date"),c.Sb()),2&t){const t=e.$implicit;c.Bb(1),c.zc(c.hc(2,1,1e3*t.date.seconds))}}function O(t,e){1&t&&(c.Tb(0,"mat-header-cell",14),c.yc(1,"Name"),c.Sb())}function D(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.yc(1),c.Sb()),2&t){const t=e.$implicit;c.Bb(1),c.zc(t.name)}}function A(t,e){1&t&&(c.Tb(0,"mat-header-cell",14),c.yc(1,"Calories"),c.Sb())}function L(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.yc(1),c.gc(2,"number"),c.Sb()),2&t){const t=e.$implicit;c.Bb(1),c.zc(c.hc(2,1,t.calories))}}function F(t,e){1&t&&(c.Tb(0,"mat-header-cell",14),c.yc(1,"Duration (Seconds)"),c.Sb())}function H(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.yc(1),c.gc(2,"number"),c.Sb()),2&t){const t=e.$implicit;c.Bb(1),c.zc(c.hc(2,1,t.duration))}}function R(t,e){1&t&&(c.Tb(0,"mat-header-cell",14),c.yc(1,"State"),c.Sb())}function P(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.yc(1),c.Sb()),2&t){const t=e.$implicit;c.Bb(1),c.zc(t.state)}}function N(t,e){1&t&&c.Ob(0,"mat-header-row")}function z(t,e){1&t&&c.Ob(0,"mat-row")}const $=function(){return[1,5,10,25]};let Q=(()=>{class t{constructor(t){this.trainingService=t,this.displayedColumns=["date","name","calories","duration","state"],this.dataSource=new k.k}ngOnInit(){this.exerciseHistoryChangedSub=this.trainingService.exerciseHistoryChanged.subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchExerciseHistory()}ngOnDestroy(){this.exerciseHistoryChangedSub&&this.exerciseHistoryChangedSub.unsubscribe()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var i;1&t&&(c.Cc(C.a,!0),c.Cc(I.a,!0)),2&t&&(c.oc(i=c.cc())&&(e.sort=i.first),c.oc(i=c.cc())&&(e.paginator=i.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","60%","fxFlex.gt-xs","30%"],["type","text","matInput","","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"mat-form-field",1),c.Tb(2,"input",2),c.bc("keyup",(function(t){return e.doFilter(t.target.value)})),c.Sb(),c.Sb(),c.Sb(),c.Tb(3,"mat-table",3),c.Rb(4,4),c.xc(5,B,2,0,"mat-header-cell",5),c.xc(6,M,3,3,"mat-cell",6),c.Qb(),c.Rb(7,7),c.xc(8,O,2,0,"mat-header-cell",5),c.xc(9,D,2,1,"mat-cell",6),c.Qb(),c.Rb(10,8),c.xc(11,A,2,0,"mat-header-cell",5),c.xc(12,L,3,3,"mat-cell",6),c.Qb(),c.Rb(13,9),c.xc(14,F,2,0,"mat-header-cell",5),c.xc(15,H,3,3,"mat-cell",6),c.Qb(),c.Rb(16,10),c.xc(17,R,2,0,"mat-header-cell",5),c.xc(18,P,2,1,"mat-cell",6),c.Qb(),c.xc(19,N,1,0,"mat-header-row",11),c.xc(20,z,1,0,"mat-row",12),c.Sb(),c.Ob(21,"mat-paginator",13)),2&t&&(c.Bb(3),c.kc("dataSource",e.dataSource),c.Bb(16),c.kc("matHeaderRowDef",e.displayedColumns),c.Bb(1),c.kc("matRowDefColumns",e.displayedColumns),c.Bb(1),c.kc("pageSize",1)("pageSizeOptions",c.lc(5,$)))},directives:[u.b,f.c,u.a,E.b,k.j,C.a,k.c,k.e,k.b,k.g,k.i,I.a,k.d,C.b,k.a,k.f,k.h],pipes:[a.e,a.f],styles:[""]}),t})();var U=i("0IaG");let K=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(U.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(c.Tb(0,"h1",0),c.yc(1,"Would you like to continue?"),c.Sb(),c.Tb(2,"mat-dialog-content"),c.Tb(3,"p"),c.yc(4),c.Sb(),c.Sb(),c.Tb(5,"mat-dialog-actions"),c.Tb(6,"button",1),c.yc(7,"Continue"),c.Sb(),c.Tb(8,"button",1),c.yc(9,"Quit"),c.Sb(),c.Sb()),2&t&&(c.Bb(4),c.Ac("You got ",e.passedData.timeLeft," seconds left"),c.Bb(2),c.kc("mat-dialog-close",!1),c.Bb(2),c.kc("mat-dialog-close",!0))},directives:[U.g,U.e,U.c,p.a,U.d],encapsulation:2}),t})();function X(t,e){if(1&t&&(c.Tb(0,"h1"),c.yc(1),c.Sb()),2&t){const t=c.fc();c.Bb(1),c.Ac("",t.time," seconds to go!")}}function j(t,e){if(1&t){const t=c.Ub();c.Tb(0,"button",4),c.bc("click",(function(){return c.rc(t),c.fc().pauseTimer()})),c.yc(1," Pause "),c.Sb()}}function G(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"button",4),c.bc("click",(function(){return c.rc(t),c.fc().restartTimer()})),c.yc(2," Go Again! "),c.Sb(),c.Tb(3,"button",5),c.bc("click",(function(){return c.rc(t),c.fc().finishCurrentTraining()})),c.yc(4," Exit "),c.Sb(),c.Sb()}}let q=(()=>{class t{constructor(t,e){this.dialog=t,this.trainingService=e,this.motivationalMessages=[{name:"Lets go!",id:0},{name:"Keep on going, you've got this!",id:1},{name:"Awesome, you made it!",id:2}],this.spinnerProgress=100,this.currentMotivationalMessageId=0,this.timerStarted=!1}ngOnInit(){this.currentExercise=this.trainingService.getCurrentExercise(),this.time=this.currentExercise.duration,this.interval=100/this.time,this.startTimer()}startTimer(){this.time===this.currentExercise.duration&&(this.currentMotivationalMessageId=0),this.timerStarted=!0,this.timer=window.setInterval(()=>{this.time>1?(this.time===Math.round(this.currentExercise.duration/2)&&(this.currentMotivationalMessageId=1),this.time-=1,this.spinnerProgress-=this.interval):(this.currentMotivationalMessageId=2,clearInterval(this.timer),this.spinnerProgress=100,this.time=this.currentExercise.duration,this.timerStarted=!1,this.trainingService.exerciseComplete())},1e3)}pauseTimer(){clearInterval(this.timer),this.dialog.open(K,{data:{timeLeft:this.time}}).afterClosed().subscribe(t=>{t?(this.trainingService.quitUnfinishedExercise(this.time),this.time=100,this.currentMotivationalMessageId=0):this.startTimer()})}restartTimer(){this.time||(this.time=100),this.startTimer()}finishCurrentTraining(){this.trainingService.finishCurrentExercise()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(U.b),c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-current-training"]],decls:9,vars:6,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],[4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"section",0),c.Tb(1,"h1"),c.yc(2),c.Sb(),c.Ob(3,"mat-progress-spinner",1),c.xc(4,X,2,1,"h1",2),c.Tb(5,"p"),c.yc(6),c.Sb(),c.xc(7,j,2,0,"button",3),c.xc(8,G,5,0,"div",2),c.Sb()),2&t&&(c.Bb(2),c.Ac("Okay, let's get those ",null==e.currentExercise?null:e.currentExercise.name," going!"),c.Bb(1),c.kc("value",e.spinnerProgress),c.Bb(1),c.kc("ngIf",e.time),c.Bb(2),c.Ac(" ",null==e.motivationalMessages[e.currentMotivationalMessageId]?null:e.motivationalMessages[e.currentMotivationalMessageId].name," "),c.Bb(1),c.kc("ngIf",e.timerStarted),c.Bb(1),c.kc("ngIf",!e.timerStarted))},directives:[u.c,u.b,g.a,a.m,p.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),t})();function _(t,e){1&t&&(c.Tb(0,"mat-tab-group"),c.Tb(1,"mat-tab",1),c.Ob(2,"app-new-training"),c.Sb(),c.Tb(3,"mat-tab",2),c.Ob(4,"app-past-trainings"),c.Sb(),c.Sb())}function J(t,e){1&t&&c.Ob(0,"app-current-training")}const V=[{path:"",component:(()=>{class t{constructor(t){this.trainingService=t,this.trainingSessionActive=!1}ngOnInit(){this.exerciseSub=this.trainingService.exerciseToggled.subscribe(t=>{t?(this.trainingSessionActive=!0,this.currentExercise=t):this.trainingSessionActive=!1})}ngOnDestroy(){this.exerciseSub&&this.exerciseSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercises"]],template:function(t,e){1&t&&(c.xc(0,_,5,0,"mat-tab-group",0),c.xc(1,J,1,0,"app-current-training",0)),2&t&&(c.kc("ngIf",!e.trainingSessionActive),c.Bb(1),c.kc("ngIf",e.trainingSessionActive))},directives:[a.m,s.b,s.a,w,Q,q],styles:[""]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[n.c.forChild(V)],n.c]}),t})();var Y=i("PCNd");let Z=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[Y.a,W]]}),t})()}}]);
//# sourceMappingURL=5-es2015.e692f1057e349fe5d11f.js.map